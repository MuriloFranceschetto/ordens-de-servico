
<div [ngClass]="{'p-6': !!dialogRef}" [formGroup]="formOrder">
    
    <div class="flex justify-between items-center">
        <h1 class="text-2xl mb-4 flex items-center">
            <button mat-icon-button (click)="returnOrCloseDialog()">
                <mat-icon>keyboard_arrow_left</mat-icon>
            </button>
            {{ isNew$() ? 'Nova' : 'Editar' + ' Order de Serviço' }}
        </h1>

        <button mat-raised-button color="accent"> Finalizar Ordem </button>

    </div>
    
    <form class="grid grid-cols-4 gap-2">
        
        <section class="col-span-2 grid grid-cols-2 gap-2">

            <mat-form-field class="col-span-2">
                <mat-label>Título</mat-label>
                <input matInput #title formControlName="title" maxlength="100">
                <mat-hint align="end"> {{ title.value.length }} / {{ title.maxLength }} </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-span-2">
                <mat-label>Cliente</mat-label>
                <mat-select formControlName="client">
                    @for (client of clients$ | async; track $index) {
                        <mat-option [value]="client">{{ client.name }}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
        
            <mat-form-field class="col-span-1">
                <mat-label>Data / Horário de entrada</mat-label>
                <input matInput type="datetime-local" formControlName="datetimeIn">
            </mat-form-field>
            
            <mat-form-field class="col-span-1">
                <mat-label>Data / Horário de saída </mat-label>
                <input matInput type="datetime-local" formControlName="datetimeOut">
            </mat-form-field> 
            
            <mat-form-field class="col-span-2">
                <mat-label>Descrição</mat-label>
                <textarea matInput #description formControlName="description" style="height: 200px;" maxlength="8000"></textarea>
                <mat-hint align="end"> {{ description.value.length }} / {{ description.maxLength }} </mat-hint>
            </mat-form-field>
            
        </section>

        <section class="col-span-2">
            
        </section>

    </form>
    
    <section class="flex justify-between gap-2">
        <div>
            @if (!isNew$()) {
                <button mat-stroked-button class="w-52" color="warn" (click)="deleteOrder()"> Excluir </button>
            }
        </div>
        <button mat-raised-button class="w-52" color="primary" (click)="registerOrder()" [disabled]="formOrder.invalid"> Salvar </button>
    </section>
</div>