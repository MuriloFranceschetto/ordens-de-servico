name: Build
on:
        push:
                branches:
                        - main
        pull_request:
                types: [opened, synchronize, reopened]
jobs:
        sonarcloud-front:
                name: SonarCloudFront
                runs-on: ubuntu-latest
                steps:
                        - uses: actions/checkout@v4
                          with:
                                  fetch-depth: 0 # Shallow clones should be disabled for a better relevancy of analysis
                        - name: List files in the repository
                          run: |
                                  ls ${{ github.workspace }}
                        - name: SonarCloud Scan
                          uses: SonarSource/sonarcloud-github-action@master
                          env:
                                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # Needed to get PR information, if any
                                  SONAR_TOKEN: ${{ secrets.SONAR_TOKEN_FRONT }}
                          with:
                                  projectBaseDir: front/
        sonarcloud-server:
                name: SonarCloudServer
                runs-on: ubuntu-latest
                steps:
                        - uses: actions/checkout@v4
                          with:
                                  fetch-depth: 0
                        - name: List files in the repository
                          run: |
                                  ls ${{ github.workspace }}
                        - name: SonarCloud Scan
                          uses: SonarSource/sonarcloud-github-action@master
                          env:
                                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                                  SONAR_TOKEN: ${{ secrets.SONAR_TOKEN_SERVER }}
                          with:
                                  projectBaseDir: server/
